<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Í∞ÄÎ≥Ä Ï°∞Í∞Å Î£∞Î†õ (2~8Ï°∞Í∞Å)</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: #f5f5f5;
    }

    .container {
      background: #ffffff;
      padding: 20px 24px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      max-width: 520px;
      width: 100%;
    }

    h1 {
      font-size: 20px;
      margin: 0 0 12px;
      text-align: center;
    }

    /* Ï°∞Í∞Å Ïàò Ïª®Ìä∏Î°§ (Ï¢åÏö∞ Î≤ÑÌäº + Ïà´Ïûê ÌëúÏãú) */
    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .controls-label {
      font-size: 14px;
    }

    .slice-control {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .slice-button {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      background: #1976d2;
      color: #fff;
      font-size: 18px;
      font-weight: bold;
      line-height: 1;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .slice-button:disabled {
      opacity: 0.4;
      cursor: default;
    }

    .slice-display {
      min-width: 32px;
      text-align: center;
      font-size: 18px;
      font-weight: 700;
    }

    .slice-range {
      font-size: 12px;
      color: #666;
      margin-left: 4px;
    }

    .inputs {
      display: grid;
      grid-template-columns: 1fr;
      gap: 6px;
      margin-bottom: 16px;
    }

    .inputs input {
      padding: 8px 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
    }

    .wheel-wrapper {
      position: relative;
      width: 260px;
      height: 260px;
      margin: 16px auto;
    }

    /* Î£∞Î†õ Ïõê */
    #wheel {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 4px solid #444;
      box-sizing: border-box;
      transition: transform 3s cubic-bezier(0.25, 0.1, 0.1, 1);
      position: relative;
      overflow: hidden;
    }

    /* Í∞ÄÏö¥Îç∞ ÎèôÍ∑∏ÎùºÎØ∏ */
    #wheel::after {
      content: "";
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #ffffff;
      border: 3px solid #444;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
    }

    /* ÏúÑÏ™Ω ÌôîÏÇ¥Ìëú(Ìè¨Ïù∏ÌÑ∞) */
    .pointer {
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 14px solid transparent;
      border-right: 14px solid transparent;
      border-bottom: 20px solid #e53935;
      z-index: 3;
    }

    /* Ï°∞Í∞Å ÌÖçÏä§Ìä∏ (Î£∞Î†õÍ≥º Ìï®Íªò ÌöåÏ†Ñ) */
    .slice-label {
      position: absolute;
      top: 50%;
      left: 50%;
      transform-origin: 50% 50%;
      font-size: 13px;
      font-weight: 600;
      white-space: nowrap;
      pointer-events: none;
      z-index: 1;
    }

    .slice-label.active {
      text-shadow: 0 0 4px rgba(0,0,0,0.4);
    }

    .btn-row {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 8px;
    }

    button {
      padding: 8px 16px;
      font-size: 14px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      background: #1976d2;
      color: #fff;
    }

    button:disabled {
      opacity: 0.6;
      cursor: default;
    }

    #result {
      text-align: center;
      margin-top: 12px;
      font-size: 16px;
      font-weight: bold;
      min-height: 24px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Í∞ÄÎ≥Ä Î£∞Î†õ (2~8Ï°∞Í∞Å)</h1>

    <!-- Ï¢åÏö∞ Î≤ÑÌäºÏúºÎ°ú Ï°∞Í∞Å Ïàò Ï°∞Ï†à -->
    <div class="controls">
      <span class="controls-label">Ï°∞Í∞Å Ïàò:</span>
      <div class="slice-control">
        <button class="slice-button" id="decSlice">‚óÄ</button>
        <span class="slice-display" id="sliceDisplay">5</span>
        <button class="slice-button" id="incSlice">‚ñ∂</button>
      </div>
      <span class="slice-range">(2 ~ 8)</span>
    </div>

    <div class="inputs">
      <input type="text" class="item-input" id="item1" placeholder="Ìï≠Î™© 1 ÏûÖÎ†•" />
      <input type="text" class="item-input" id="item2" placeholder="Ìï≠Î™© 2 ÏûÖÎ†•" />
      <input type="text" class="item-input" id="item3" placeholder="Ìï≠Î™© 3 ÏûÖÎ†•" />
      <input type="text" class="item-input" id="item4" placeholder="Ìï≠Î™© 4 ÏûÖÎ†•" />
      <input type="text" class="item-input" id="item5" placeholder="Ìï≠Î™© 5 ÏûÖÎ†•" />
      <input type="text" class="item-input" id="item6" placeholder="Ìï≠Î™© 6 ÏûÖÎ†•" />
      <input type="text" class="item-input" id="item7" placeholder="Ìï≠Î™© 7 ÏûÖÎ†•" />
      <input type="text" class="item-input" id="item8" placeholder="Ìï≠Î™© 8 ÏûÖÎ†•" />
    </div>

    <div class="wheel-wrapper">
      <div class="pointer"></div>

      <!-- Î£∞Î†õ + ÌÖçÏä§Ìä∏ (ÏµúÎåÄ 8Í∞ú) -->
      <div id="wheel">
        <div class="slice-label" data-index="0"></div>
        <div class="slice-label" data-index="1"></div>
        <div class="slice-label" data-index="2"></div>
        <div class="slice-label" data-index="3"></div>
        <div class="slice-label" data-index="4"></div>
        <div class="slice-label" data-index="5"></div>
        <div class="slice-label" data-index="6"></div>
        <div class="slice-label" data-index="7"></div>
      </div>
    </div>

    <div class="btn-row">
      <button id="spinBtn">ÎèåÎ¶¨Í∏∞</button>
    </div>

    <div id="result"></div>
  </div>

  <script>
    const spinBtn = document.getElementById("spinBtn");
    const wheel = document.getElementById("wheel");
    const resultDiv = document.getElementById("result");

    const itemInputs = Array.from(document.querySelectorAll(".item-input"));
    const sliceLabels = Array.from(document.querySelectorAll(".slice-label"));

    const decSliceBtn = document.getElementById("decSlice");
    const incSliceBtn = document.getElementById("incSlice");
    const sliceDisplay = document.getElementById("sliceDisplay");

    let sliceCount = 5;
    let anglePerSlice = 360 / sliceCount;
    let currentRotation = 0;

    const MIN_SLICE = 2;
    const MAX_SLICE = 8;

    const colors = [
      "#ff9aa2",
      "#ffdac1",
      "#e2f0cb",
      "#b5ead7",
      "#c7ceea",
      "#ffd5e5",
      "#c1e1ff",
      "#e0bbff"
    ];

    function buildGradient() {
      anglePerSlice = 360 / sliceCount;
      const stops = [];
      for (let i = 0; i < sliceCount; i++) {
        const start = anglePerSlice * i;
        const end = anglePerSlice * (i + 1);
        const color = colors[i % colors.length];
        stops.push(`${color} ${start}deg ${end}deg`);
      }
      wheel.style.background = `conic-gradient(${stops.join(",")})`;
    }

    function positionLabels() {
      anglePerSlice = 360 / sliceCount;
      sliceLabels.forEach((label, idx) => {
        if (idx < sliceCount) {
          const angle = anglePerSlice * idx + anglePerSlice / 2;
          label.style.display = "block";
          label.style.transform = `translate(-50%, -50%) rotate(${angle}deg) translate(0, -85px)`;
        } else {
          label.style.display = "none";
        }
      });
    }

    function updateInputVisibility() {
      itemInputs.forEach((input, idx) => {
        if (idx < sliceCount) {
          input.style.display = "block";
        } else {
          input.style.display = "none";
        }
      });
    }

    function getUserItems() {
      const items = [];
      for (let i = 0; i < sliceCount; i++) {
        const txt = itemInputs[i].value.trim();
        items.push(txt === "" ? `Ìï≠Î™© ${i + 1}` : txt);
      }
      return items;
    }

    function updateLabelTexts(items, activeIndex) {
      sliceLabels.forEach((label, idx) => {
        if (idx < sliceCount) {
          label.textContent = items[idx];
          if (idx === activeIndex) {
            label.classList.add("active");
          } else {
            label.classList.remove("active");
          }
        } else {
          label.textContent = "";
          label.classList.remove("active");
        }
      });
    }

    function updateSliceButtons() {
      sliceDisplay.textContent = sliceCount;
      decSliceBtn.disabled = sliceCount <= MIN_SLICE;
      incSliceBtn.disabled = sliceCount >= MAX_SLICE;
    }

    function refreshUI() {
      buildGradient();
      positionLabels();
      updateInputVisibility();
      updateLabelTexts(getUserItems(), -1);
      updateSliceButtons();
    }

    decSliceBtn.addEventListener("click", () => {
      if (sliceCount <= MIN_SLICE) return;
      sliceCount--;
      sliceDisplay.textContent = sliceCount;

      currentRotation = 0;
      wheel.style.transform = "rotate(0deg)";
      resultDiv.textContent = "";

      refreshUI();
    });

    incSliceBtn.addEventListener("click", () => {
      if (sliceCount >= MAX_SLICE) return;
      sliceCount++;
      sliceDisplay.textContent = sliceCount;

      currentRotation = 0;
      wheel.style.transform = "rotate(0deg)";
      resultDiv.textContent = "";

      refreshUI();
    });

    spinBtn.addEventListener("click", () => {
      const items = getUserItems();

      const hasRealText = items.some((txt, idx) => {
        return itemInputs[idx].value.trim() !== "";
      });

      if (!hasRealText) {
        alert("ÏµúÏÜå Ìïú Í∞ú Ïù¥ÏÉÅ ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî!\n(ÎØ∏ÏûÖÎ†• Ìï≠Î™©ÏùÄ 'Ìï≠Î™© 1' ÌòïÏãùÏúºÎ°ú Ï±ÑÏõåÏßëÎãàÎã§.)");
      }

      updateLabelTexts(items, -1);

      spinBtn.disabled = true;
      resultDiv.textContent = "ÎèåÎ¶¨Îäî Ï§ë...";

      const targetIndex = Math.floor(Math.random() * sliceCount);

      const extraTurns = 5 + Math.floor(Math.random() * 5); // 5~9Î∞îÌÄ¥
      anglePerSlice = 360 / sliceCount;
      const targetAngle = targetIndex * anglePerSlice + anglePerSlice / 2;

      const finalRotation = currentRotation + extraTurns * 360 - targetAngle;

      currentRotation = finalRotation;
      wheel.style.transform = `rotate(${finalRotation}deg)`;

      setTimeout(() => {
        const selectedText = items[targetIndex];
        resultDiv.textContent = `Í≤∞Í≥º: "${selectedText}" üéâ`;
        updateLabelTexts(items, targetIndex);
        spinBtn.disabled = false;
      }, 3000);
    });

    // Ï¥àÍ∏∞ ÏÑ∏ÌåÖ
    refreshUI();
  </script>
</body>
</html>
